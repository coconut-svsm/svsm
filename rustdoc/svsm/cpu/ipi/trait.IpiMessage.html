<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Safety"><title>IpiMessage in svsm::cpu::ipi - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="svsm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../../../static.files/storage-68b7e25d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../svsm/index.html">svsm</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">IpiMessage</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#safety" title="Safety">Safety</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.invoke" title="invoke">invoke</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.copy_to_shared" title="copy_to_shared">copy_to_shared</a></li><li><a href="#method.finalize" title="finalize">finalize</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In svsm::<wbr>cpu::<wbr>ipi</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">svsm</a>::<wbr><a href="../index.html">cpu</a>::<wbr><a href="index.html">ipi</a></div><h1>Trait <span class="trait">IpiMessage</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/svsm/cpu/ipi.rs.html#79-112">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe trait IpiMessage {
    // Required method
    fn <a href="#tymethod.invoke" class="fn">invoke</a>(&amp;self);

    // Provided methods
    fn <a href="#method.copy_to_shared" class="fn">copy_to_shared</a>(&amp;self, buffer: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.90.0/core/primitive.u8.html">u8</a>])
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.90.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.finalize" class="fn">finalize</a>(&amp;self, _shared_buffer: &amp;Self) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<p>This trait implements a method to copy IPI message contents into a shared
buffer.  If that serialization is performed incorrectly, then IPI message
receipt will be unsound because the message may contain incorrect pointers
and references that refer to invalid memory - or memory that belongs to
another owner.  All implementations of this trait must verify that the
copy routine correctly copies all data and resolves all references within
the copied data.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.invoke" class="method"><a class="src rightside" href="../../../src/svsm/cpu/ipi.rs.html#111">Source</a><h4 class="code-header">fn <a href="#tymethod.invoke" class="fn">invoke</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Invokes the IPI handler for the message.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.copy_to_shared" class="method"><a class="src rightside" href="../../../src/svsm/cpu/ipi.rs.html#89-101">Source</a><h4 class="code-header">fn <a href="#method.copy_to_shared" class="fn">copy_to_shared</a>(&amp;self, buffer: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.90.0/core/primitive.u8.html">u8</a>])<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.90.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>All IPI messages must be copied into a shared IPI buffer since stack
locals are not visible across CPU/task contexts.  This function must
perform a deep copy of the contents of the source buffer into the
shared destination buffer.</p>
<p>Arguments:</p>
<p>*<code>src</code>: A pointer to the input message.
*<code>buffer</code>: A byte slice in shared memory which will be the target of the copy.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.finalize" class="method"><a class="src rightside" href="../../../src/svsm/cpu/ipi.rs.html#108">Source</a><h4 class="code-header">fn <a href="#method.finalize" class="fn">finalize</a>(&amp;self, _shared_buffer: &amp;Self)</h4></section></summary><div class="docblock"><p>If an IPI message has any atomic members, then they may be modified
by IPI execution.  Therefore, it may be necessary to transfer the
modified atomic members back to the original message so the sender
can observe the final atomic value.  IPI message implementations only
need to implement this method if they require such finalization.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.90.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-IpiMessage-for-TlbFlushScope" class="impl"><a class="src rightside" href="../../../src/svsm/cpu/tlb.rs.html#52-56">Source</a><a href="#impl-IpiMessage-for-TlbFlushScope" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.IpiMessage.html" title="trait svsm::cpu::ipi::IpiMessage">IpiMessage</a> for <a class="enum" href="../tlb/enum.TlbFlushScope.html" title="enum svsm::cpu::tlb::TlbFlushScope">TlbFlushScope</a></h3></section><section id="impl-IpiMessage-for-SetAffinityMessage" class="impl"><a class="src rightside" href="../../../src/svsm/task/schedule.rs.html#555-564">Source</a><a href="#impl-IpiMessage-for-SetAffinityMessage" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.IpiMessage.html" title="trait svsm::cpu::ipi::IpiMessage">IpiMessage</a> for <a class="struct" href="../../task/schedule/struct.SetAffinityMessage.html" title="struct svsm::task::schedule::SetAffinityMessage">SetAffinityMessage</a></h3></section></div><script src="../../../trait.impl/svsm/cpu/ipi/trait.IpiMessage.js" async></script></section></div></main></body></html>